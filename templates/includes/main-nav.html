    <div class="collapse navbar-collapse" id="main-nav">
      <ul class="navbar-nav w-auto mx-auto">
        <li class="nav-item active">
          <a class="nav-link mr-5 text-white" href="{% url 'home' %}">Home 
            <span class="sr-only">(current)</span></a>
        </li>

         <!-- My account moved to dropdown toggler for mobile screens-->
        <li class="nav-item dropdown d-lg-none">
          <a class="nav-link mr-5 text-white" href="#" id="account-options" 
          data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
           My Account
          </a>
          <div class="dropdown-menu border-0" aria-labelledby="account-options">
              {% if request.user.is_authenticated %}
              {% if request.user.is_superuser %}
              <a href="{% url 'add_product' %}" class="dropdown-item">Product Management</a>
              {% endif %}
              <a href="{% url 'profile' %}" class="dropdown-item">My Profile</a>
              <a href="{% url 'account_logout' %}" class="dropdown-item">Logout</a>
              {% else %}
              <a href="{% url 'account_signup' %}" class="dropdown-item">Register</a>
              <a href="{% url 'account_login' %}" class="dropdown-item">Login</a>
              {% endif %}
          </div>
      </li>

     <li class="nav-item dropdown">
          <a class="nav-link mr-5 text-white" href="#" id="buy-wines-link"
          data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Buy Wines
          </a>
          <ul class="dropdown-menu" aria-labelledby="buy-wines-link">
            
            <li class="dropdown-submenu"><a class="dropdown-item dropdown-toggle">By Type</a>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="{% url 'products' %}?colour=Red">Red Wine</a></li>
                <li><a class="dropdown-item" href="{% url 'products' %}?colour=White">White Wine</a></li>
                <li><a class="dropdown-item" href="{% url 'products' %}?colour=Rose">Rose Wine</a></li>
                <li><a href="{% url 'products' %}" class="dropdown-item">All Wines</a></li>
              </ul>
            </li>

            <li class="dropdown-submenu"><a class="dropdown-item dropdown-toggle">By Country</a>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="{% url 'products' %}?Italy">Italy</a></li>
                <li><a class="dropdown-item" href="{% url 'products' %}?France">France</a></li>
                <li><a class="dropdown-item" href="{% url 'products' %}?USA">USA</a></li>
                <li><a class="dropdown-item" href="{% url 'products' %}?Australia">Australia</a></li>
                <li><a class="dropdown-item" href="{% url 'products' %}?New_Zeland">New Zeland</a></li>
                <li><a class="dropdown-item" href="{% url 'products' %}?Chile">Chile</a></li>
                <li><a href="{% url 'products' %}" class="dropdown-item">All Countries</a></li>
              </ul>
            </li>

              <li class="dropdown-submenu"><a class="dropdown-item dropdown-toggle">By Style</a>
                <ul class="dropdown-menu">
                  <li><a class="dropdown-item" href="{% url 'products' %}?style=Crisp">Crisp</a></li>
                  <li><a class="dropdown-item" href="{% url 'products' %}?style=Ripe">Ripe</a></li>
                  <li><a class="dropdown-item" href="{% url 'products' %}?style=Smooth">Smooth</a></li>
                  <li><a class="dropdown-item" href="{% url 'products' %}?style=Spicy">Spicy</a></li>
                  <li><a class="dropdown-item" href="{% url 'products' %}?style=Rich">Rich</a></li>
                  <li><a href="{% url 'products' %}" class="dropdown-item">All Styles</a></li>
                </ul>
              </li>

              <li class="dropdown-submenu"><a class="dropdown-item dropdown-toggle">By Grape</a>
                <ul class="dropdown-menu">
                  <li><a class="dropdown-item" href="{% url 'products' %}?grape=Sauvignon_Blanc">Sauvignon Blanc</a></li>
                  <li><a class="dropdown-item" href="{% url 'products' %}?grape=Chardonnay">Chardonnay</a></li>
                  <li><a class="dropdown-item" href="{% url 'products' %}?grape=Pinot_Noir">Pinot Noir</a></li>
                  <li><a href="{% url 'products' %}" class="dropdown-item">All Grapes</a></li>
                </ul>
              </li>

          </ul>
        </li>

        <li class="nav-item mr-5">
            <a class="nav-link text-white" href="{% url 'products' %}?title=champagne">Champagne</a>
          </li>

          <li class="nav-item dropdown">
            <a class="nav-link text-white mr-5" href="#" data-toggle ="dropdown" id="wine-gifts-link"
            aria-haspopup="true" aria-expanded="false">
              Wine Gifts
          </a>
          <div class="dropdown-menu border-0" aria-labelledby="wine-gifts-link">
            <a href="{% url 'products' %}?6" class="dropdown-item">6 Bottle Cases</a>
            <a href="{% url 'products' %}?12" class="dropdown-item">12 Bottle Cases</a>
        </div>
          </li>

          <!-- Favourites moved to dropdown toggler on small sceens -->
          {% if request.user.is_authenticated %}                     
          <li class="nav-item mr-5 d-lg-none">
            <a class="nav-link text-white" href="{% url 'favourites' %}">Favourites</a>
          </li>
          {% endif %}
      </ul> 
    </div>


  <script>
    $('.dropdown-menu a.dropdown-toggle').on('click', function(e) {
  if (!$(this).next().hasClass('show')) {
    $(this).parents('.dropdown-menu').first().find('.show').removeClass("show");
  }
  var $subMenu = $(this).next(".dropdown-menu");
  $subMenu.toggleClass('show');


  $(this).parents('li.nav-item.dropdown.show').on('hidden.bs.dropdown', function(e) {
    $('.dropdown-submenu .show').removeClass("show");
  });


  return false;
});
  </script>